import{h as f,c as l,d as c,B as o,a as t,F as u,z as v,A as a,D as p,s as _,v as b,w as g,r as x,o as d,q as h}from"./index-DxWNoie_.js";import{u as C}from"./counter-6JJKcX_B.js";import{u as k}from"./cartStore-BrJ7COVD.js";import"./emitter-E5P-NQ8u.js";const w={class:"container"},V={class:"row justify-content-center"},q={class:"col-md-6 bg-white py-5",style:{"min-height":"calc(100vh - 56px - 76px)"}},j=["src"],N={class:"w-100 p-3 position-relative"},S=["onClick"],U={class:"mb-0 fw-bold"},B={class:"mb-1 text-muted",style:{"font-size":"14px"}},D={class:"d-flex justify-content-between align-items-center w-100"},L={class:"input-group w-50 align-items-center"},F=["onClick"],T=["onUpdate:modelValue","disabled","onChange"],$=["onClick"],z={class:"text-end text-success"},E={key:0,class:"text-success"},M={class:"d-flex flex-column justify-content-end p-3"},A={class:"text-end"},I={key:0},G={class:"text-end text-success"},H={class:"input-group mb-3 input-group-sm"},J={class:"input-group-append"},X={__name:"UserCart",setup(K){const r=C(),s=k();return f(()=>{s.getCart()}),(O,n)=>{const y=x("Loading"),m=x("router-link");return d(),l(u,null,[c(y,{active:o(s).isLoading},null,8,["active"]),t("div",w,[t("div",V,[t("div",q,[n[6]||(n[6]=t("div",{class:"d-flex justify-content-between"},[t("h2",{class:"mt-2"},"購物車 Cart Detail")],-1)),(d(!0),l(u,null,v(o(s).cart.carts,e=>(d(),l("div",{class:"d-flex mt-4",key:e.id},[t("img",{src:e.product.imageUrl,alt:"",style:{width:"120px",height:"120px","object-fit":"cover"}},null,8,j),t("div",N,[t("button",{class:"position-absolute border-0 rounded-5",style:{top:"16px",right:"16px"},onClick:i=>o(s).removeFromCart(e)},n[2]||(n[2]=[t("i",{class:"bi bi-x-lg"},null,-1)]),8,S),t("p",U,a(e.product.title),1),t("p",B,a(e.product.content),1),t("div",D,[t("div",L,[t("button",{class:"btn input-group-prepend pe-1 border-0 py-2",type:"button",id:"button-addon1",onClick:()=>{e.qty>1&&(e.qty--,o(s).updateCart(e))}},n[3]||(n[3]=[t("i",{class:"bi bi-dash-lg"},null,-1)]),8,F),_(t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none px-0",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:"1","onUpdate:modelValue":i=>e.qty=i,disabled:o(s).status.loadingItem===e.id,onChange:i=>o(s).updateCart(e)},null,40,T),[[b,e.qty,void 0,{number:!0}]]),t("button",{class:"btn input-group-append ps-1 border-0 py-2",type:"button",id:"button-addon2",onClick:()=>{e.qty++,o(s).updateCart(e)}},n[4]||(n[4]=[t("i",{class:"bi bi-plus-lg"},null,-1)]),8,$)]),t("div",z,[o(s).cart.final_total!==o(s).cart.total?(d(),l("small",E,"折扣價：")):p("",!0),h(" NT$"+a(o(r).currency(e.final_total)),1)])])])]))),128)),n[7]||(n[7]=t("hr",null,null,-1)),t("div",M,[t("p",A,"總計 "+a(o(r).currency(o(s).cart.total)),1),o(s).cart.total!==o(s).cart.final_total?(d(),l("div",I,[t("p",G,"折扣價"+a(o(r).currency(o(s).cart.final_total)),1)])):p("",!0)]),t("div",H,[_(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":n[0]||(n[0]=e=>o(s).coupon_code=e)},null,512),[[b,o(s).coupon_code]]),t("div",J,[t("button",{class:"btn btn-outline-secondary",type:"button",onClick:n[1]||(n[1]=(...e)=>o(s).addCouponCode&&o(s).addCouponCode(...e))}," 套用優惠碼 ")])]),c(m,{to:"/user/userform"},{default:g(()=>n[5]||(n[5]=[t("button",{class:"btn btn-dark py-3 px-7 rounded-0"},"下一步",-1)])),_:1})])])])],64)}}};export{X as default};
