import{r as v,M as V,m as h,c as n,a as e,h as o,G as _,F as C,i as j,t as r,u as F,j as c,o as d,b as S,n as f,e as U,v as E,N as q}from"./index-DCH4RT8N.js";import{u as M}from"./counter-BqHJi77H.js";import{u as N}from"./cartStore-BMjQUvkA.js";const $={class:"pt-5 pb-7"},B={class:"container"},L={class:"row justify-content-center flex-md-row flex-column"},T={class:"col-md-4"},D={class:"border p-4 mb-4 mt-2"},O=["src"],z={class:"w-100"},G={class:"d-flex justify-content-between fw-bold"},I={class:"mb-0"},R={class:"mb-0"},A={class:"d-flex justify-content-between"},H={key:0},J={class:"text-muted mb-0"},K={key:1},P={class:"text-muted mb-0"},Q={class:"mb-0"},W={class:"d-flex justify-content-between mt-4"},X={class:"mb-0 h4 fw-bold"},Y={class:"col-md-6"},Z={class:"bg-white p-4 mt-2"},ee={class:"mb-2"},se={class:"mb-2"},le={class:"mb-5"},te={class:"mb-3"},de={__name:"UserForm",setup(oe){const x=M(),p=N(),y=q();v(!1);const b=V(()=>p.cart),t=v({user:{name:"",email:"",tel:"",address:""},message:""}),w=async()=>{try{const i=await p.createOrder(t.value);y.push(`/user/checkout/${i}`)}catch(i){console.error("Error during create order:",i)}};return h(()=>{p.getCart()}),(i,s)=>{const g=c("router-link"),m=c("Field"),u=c("ErrorMessage"),k=c("Form");return d(),n("div",$,[e("div",B,[e("div",L,[e("div",T,[o(g,{to:"/user/cart",class:"text-dark mb-3"},{default:_(()=>s[5]||(s[5]=[e("i",{class:"bi bi-caret-left-fill"},null,-1),S("上一頁")])),_:1}),e("div",D,[s[7]||(s[7]=e("h4",{class:"mb-4"},"訂單資訊",-1)),(d(!0),n(C,null,j(b.value.carts,l=>(d(),n("div",{class:"d-flex mt-2",key:l.id},[e("img",{src:l.product.imageUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,O),e("div",z,[e("div",G,[e("p",I,r(l.product.title),1),e("p",R,"x"+r(l.qty),1)]),e("div",A,[l.product.price===l.final_total?(d(),n("div",H,[e("p",J,[e("small",null,"原價$"+r(l.product.price),1)])])):(d(),n("div",K,[e("p",P,[e("small",null,"優惠價$"+r(l.final_total),1)])])),e("p",Q,"$"+r(l.final_total),1)])])]))),128)),s[8]||(s[8]=e("hr",null,null,-1)),e("div",W,[s[6]||(s[6]=e("p",{class:"mb-0 h4 fw-bold"},"總價",-1)),e("p",X,"NT$"+r(F(x).currency(b.value.final_total)),1)])])]),e("div",Y,[e("div",Z,[s[18]||(s[18]=e("h4",{class:"fw-bold"},"1. 聯絡資訊",-1)),s[19]||(s[19]=e("p",{class:"mt-1"},"Contact information",-1)),o(k,{onSubmit:w},{default:_(({errors:l})=>[e("div",ee,[s[9]||(s[9]=e("label",{for:"email",class:"text-muted mb-0 form-label"},"Email",-1)),o(m,{id:"email",name:"email",type:"email",class:f(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.value.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.user.email=a)},null,8,["class","modelValue"]),o(u,{name:"email",class:"invalid-feedback"})]),s[13]||(s[13]=e("div",{class:"form-group form-check"},[e("input",{type:"checkbox",class:"form-check-input rounded-0",id:"ContactLorem"}),e("label",{class:"form-check-label",for:"ContactLorem"},"記住我的email")],-1)),e("div",se,[s[10]||(s[10]=e("label",{for:"name",class:"text-muted mb-0 form-label"},"收件人姓名",-1)),o(m,{id:"name",name:"姓名",type:"text",class:f(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.value.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.user.name=a)},null,8,["class","modelValue"]),o(u,{name:"姓名",class:"invalid-feedback"})]),e("div",le,[s[11]||(s[11]=e("label",{for:"tel",class:"text-muted mb-0 form-label"},"收件人電話",-1)),o(m,{id:"tel",name:"電話",type:"tel",class:f(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:t.value.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.value.user.tel=a)},null,8,["class","modelValue"]),o(u,{name:"電話",class:"invalid-feedback"})]),s[14]||(s[14]=e("h4",{class:"fw-bold"},"2. 送貨地點",-1)),s[15]||(s[15]=e("p",{class:"mt-1 mb-3"},"Shipping address",-1)),s[16]||(s[16]=e("label",{for:"address",class:"form-label"},"收件人地址",-1)),o(m,{id:"address",name:"地址",type:"text",class:f(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.value.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.value.user.address=a)},null,8,["class","modelValue"]),o(u,{name:"地址",class:"invalid-feedback"}),e("div",te,[s[12]||(s[12]=e("label",{for:"message",class:"form-label"},"留言",-1)),U(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=a=>t.value.message=a)},"                                ",512),[[E,t.value.message]])]),s[17]||(s[17]=e("div",{class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},[e("button",{type:"submit",class:"btn btn-dark py-3 px-7 rounded-0"},"前往付款")],-1))]),_:1})])])])])])}}};export{de as default};
