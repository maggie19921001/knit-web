import{e as u,l as _,g as L,c as n,a as e,E as i,d as B,F as h,z as P,D as c,x as I,r as E,o as l,A as v,q as V,u as j}from"./index-DId58a1l.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"d-flex gap-3 justify-content-center my-5",role:"group","aria-label":"Basic radio toggle button group"},U={class:"container mx-auto"},q={class:"row mt-4"},z={class:"card border-0 mb-4 position-relative"},F=["src","onClick"],A={class:"card-body p-0"},M=["onClick"],R={key:0,class:"text-muted mt-3"},G={key:1,class:"text-muted mt-3"},H={key:2,class:""},J=["onClick","disabled"],K={key:0,class:"spinner-border text-primary spinner-border-sm text-light",role:"status"},O={key:0,class:"d-flex justify-content-center mt-4"},Q={"aria-label":"Product pagination"},W={class:"pagination"},X=["disabled"],Y=["onClick"],Z=["disabled"],tt={key:1,class:"text-center mt-5"},et={__name:"UserShop",setup(ot){const w=j(),d=u([]),b=u({loadingItem:""}),f=u(!1);(async()=>{try{f.value=!0;const t=await I.get("https://vue3-course-api.hexschool.io/api/cart-yu2513/products/all");f.value=!1,d.value=t.data.products}catch(o){console.error("Error during get products:",o)}})();const C=o=>{w.push(`/user/product/${o}`)},N=async o=>{try{b.value.loadingItem=o;const t={product_id:o,qty:1},s=await I.post("https://vue3-course-api.hexschool.io/api/cart-yu2513/cart",{data:t});b.value.loadingItem=""}catch(t){console.error("Error during add to cart:",t)}},a=u("全部"),p=o=>{a.value=o},g=_(()=>a.value==="全部"?d.value:a.value==="工具"?d.value.filter(o=>/工具/.test(o.category)):a.value==="毛線"?d.value.filter(o=>/毛線/.test(o.category)):a.value==="課程"?d.value.filter(o=>/課程/.test(o.category)):a.value==="組合"?d.value.filter(o=>/組合/.test(o.category)):d.value.filter(o=>/工具|毛線|課程|組合/.test(o.category))),r=u(1),y=u(9),T=_(()=>{const o=(r.value-1)*y.value,t=o+y.value;return g.value.slice(o,t)}),m=_(()=>Math.ceil(g.value.length/y.value)),k=o=>{o>=1&&o<=m.value&&(r.value=o,window.scrollTo({top:0,behavior:"smooth"}))};return L(a,()=>{r.value=1}),(o,t)=>{const $=E("Loading");return l(),n(h,null,[e("div",S,[t[7]||(t[7]=e("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",checked:""},null,-1)),e("label",{class:i(["btn btn-outline-primary px-4",{active:a.value=="全部"}]),for:"btnradio1",onClick:t[0]||(t[0]=s=>p("全部"))},"全部",2),t[8]||(t[8]=e("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off"},null,-1)),e("label",{class:i(["btn btn-outline-primary px-4",{active:a.value=="工具"}]),for:"btnradio2",onClick:t[1]||(t[1]=s=>p("工具"))},"工具",2),t[9]||(t[9]=e("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio3",autocomplete:"off"},null,-1)),e("label",{class:i(["btn btn-outline-primary px-4",{active:a.value=="毛線"}]),for:"btnradio3",onClick:t[2]||(t[2]=s=>p("毛線"))},"毛線",2),t[10]||(t[10]=e("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio4",autocomplete:"off"},null,-1)),e("label",{class:i(["btn btn-outline-primary px-4",{active:a.value=="課程"}]),for:"btnradio4",onClick:t[3]||(t[3]=s=>p("課程"))},"課程",2),t[11]||(t[11]=e("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio5",autocomplete:"off"},null,-1)),e("label",{class:i(["btn btn-outline-primary px-4",{active:a.value=="組合"}]),for:"btnradio5",onClick:t[4]||(t[4]=s=>p("組合"))},"組合",2)]),B($,{active:f.value},null,8,["active"]),e("div",U,[e("div",q,[(l(!0),n(h,null,P(T.value,s=>(l(),n("div",{class:"col-md-4 col-sm-6",key:s.id},[e("div",z,[e("img",{src:s.imageUrl,alt:"產品圖片",style:{width:"100%",height:"300px","object-fit":"cover",cursor:"pointer"},class:"card-img-top rounded-2",onClick:x=>C(s.id)},null,8,F),e("div",A,[e("h5",{class:"mb-0 mt-3",style:{cursor:"pointer"},onClick:x=>C(s.id)},v(s.title),9,M),s.price?c("",!0):(l(),n("p",R,"NT$"+v(s.origin_price),1)),s.price?(l(),n("del",G,"NT$"+v(s.origin_price),1)):c("",!0),s.price?(l(),n("h6",H,"特價 NT$"+v(s.price),1)):c("",!0),e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:x=>N(s.id),disabled:b.value.loadingItem===s.id},[b.value.loadingItem===s.id?(l(),n("div",K,t[12]||(t[12]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):c("",!0),t[13]||(t[13]=V(" 加到購物車 "))],8,J)])])]))),128))])]),g.value.length>0?(l(),n("div",O,[e("nav",Q,[e("ul",W,[e("li",{class:i(["page-item",{disabled:r.value===1}])},[e("button",{class:"btn page-link rounded-0 rounded-start-2",onClick:t[5]||(t[5]=s=>k(r.value-1)),disabled:r.value===1},t[14]||(t[14]=[e("span",{"aria-hidden":"true"},"«",-1)]),8,X)],2),(l(!0),n(h,null,P(m.value,s=>(l(),n("li",{key:s,class:i(["page-item",{active:s===r.value}])},[e("button",{class:"btn page-link rounded-0",onClick:x=>k(s)},v(s),9,Y)],2))),128)),e("li",{class:i(["page-item",{disabled:r.value===m.value}])},[e("button",{class:"btn page-link rounded-0 rounded-end-2",onClick:t[6]||(t[6]=s=>k(r.value+1)),disabled:r.value===m.value},t[15]||(t[15]=[e("span",{"aria-hidden":"true"},"»",-1)]),8,Z)],2)])])])):c("",!0),g.value.length===0?(l(),n("div",tt,t[16]||(t[16]=[e("p",{class:"text-muted"},"該分類下目前沒有產品。",-1)]))):c("",!0)],64)}}},lt=D(et,[["__scopeId","data-v-f352d254"]]);export{lt as default};
