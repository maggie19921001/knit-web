import{r as p,s as C,c as f,a as s,f as o,g,F as $,l as E,t as n,m as F,d as w,e as m,o as b,h as U,x as u,w as j,v as q,u as S}from"./index-BkuwJpVc.js";import{u as L}from"./counter-BRGq6M10.js";import"./emitter-E5P-NQ8u.js";const M={class:"pt-5 pb-7"},N={class:"container"},B={class:"row justify-content-center flex-md-row flex-column-reverse"},T={class:"col-md-4"},D={class:"border p-4 mb-4 mt-2"},I=["src"],z={class:"w-100"},O={class:"d-flex justify-content-between fw-bold"},R={class:"mb-0"},A={class:"mb-0"},G={class:"d-flex justify-content-between"},H={class:"text-muted mb-0"},J={class:"mb-0"},K={class:"d-flex justify-content-between mt-4"},P={class:"mb-0 h4 fw-bold"},Q={class:"col-md-6"},W={class:"bg-white p-4 mt-2"},X={class:"mb-2"},Y={class:"mb-2"},Z={class:""},ee={class:"bg-white p-4 mt-3"},se={class:"mb-3"},re={__name:"UserForm",setup(te){const y=L(),_=S(),v=p(!1),c=p({}),t=p({user:{name:"",email:"",tel:"",address:""},message:""}),h=async()=>{try{v.value=!0;const e=await w.get("https://vue3-course-api.hexschool.io/api/cart-yu2513/cart");v.value=!1,c.value=e.data.data,console.log(e)}catch(r){console.error("Error during get cart:",r)}},k=async()=>{try{const r=t.value,d=(await w.post("https://vue3-course-api.hexschool.io/api/cart-yu2513/order",{data:r})).data.orderId;_.push(`/user/checkout/${d}`)}catch(r){console.error("Error during create order:",r)}};return C(()=>{h()}),(r,e)=>{const x=m("router-link"),d=m("Field"),i=m("ErrorMessage"),V=m("Form");return b(),f("div",M,[s("div",N,[s("div",B,[s("div",T,[o(x,{to:"/user/cart",class:"text-dark mb-3"},{default:g(()=>e[5]||(e[5]=[s("i",{class:"bi bi-caret-left-fill"},null,-1),U("上一頁")])),_:1}),s("div",D,[e[7]||(e[7]=s("h4",{class:"mb-4"},"訂單資訊",-1)),(b(!0),f($,null,E(c.value.carts,l=>(b(),f("div",{class:"d-flex mt-2",key:l.id},[s("img",{src:l.product.imageUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,I),s("div",z,[s("div",O,[s("p",R,n(l.product.title),1),s("p",A,"x"+n(l.qty),1)]),s("div",G,[s("p",H,[s("small",null,"原價$"+n(l.product.price),1)]),s("p",J,"$"+n(l.total),1)])])]))),128)),e[8]||(e[8]=s("hr",null,null,-1)),s("div",K,[e[6]||(e[6]=s("p",{class:"mb-0 h4 fw-bold"},"總價",-1)),s("p",P,"NT$"+n(F(y).currency(c.value.total)),1)])])]),s("div",Q,[s("div",W,[e[18]||(e[18]=s("h4",{class:"fw-bold"},"1. 聯絡資訊",-1)),e[19]||(e[19]=s("p",{class:"mt-1"},"Contact information",-1)),o(V,{onSubmit:k},{default:g(({errors:l})=>[s("div",X,[e[9]||(e[9]=s("label",{for:"email",class:"text-muted mb-0 form-label"},"Email",-1)),o(d,{id:"email",name:"email",type:"email",class:u(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.value.user.email,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.user.email=a)},null,8,["class","modelValue"]),o(i,{name:"email",class:"invalid-feedback"})]),e[17]||(e[17]=s("div",{class:"form-group form-check"},[s("input",{type:"checkbox",class:"form-check-input rounded-0",id:"ContactLorem"}),s("label",{class:"form-check-label",for:"ContactLorem"},"記住我的email")],-1)),s("div",Y,[e[10]||(e[10]=s("label",{for:"name",class:"text-muted mb-0 form-label"},"收件人姓名",-1)),o(d,{id:"name",name:"姓名",type:"text",class:u(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.value.user.name,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.user.name=a)},null,8,["class","modelValue"]),o(i,{name:"姓名",class:"invalid-feedback"})]),s("div",Z,[e[11]||(e[11]=s("label",{for:"tel",class:"text-muted mb-0 form-label"},"收件人電話",-1)),o(d,{id:"tel",name:"電話",type:"tel",class:u(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:t.value.user.tel,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.user.tel=a)},null,8,["class","modelValue"]),o(i,{name:"電話",class:"invalid-feedback"})]),s("div",ee,[e[13]||(e[13]=s("h4",{class:"fw-bold"},"2. 送貨地點",-1)),e[14]||(e[14]=s("p",{class:"mt-1 mb-3"},"Shipping address",-1)),e[15]||(e[15]=s("label",{for:"address",class:"form-label"},"收件人地址",-1)),o(d,{id:"address",name:"地址",type:"text",class:u(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.value.user.address,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.user.address=a)},null,8,["class","modelValue"]),o(i,{name:"地址",class:"invalid-feedback"}),s("div",se,[e[12]||(e[12]=s("label",{for:"message",class:"form-label"},"留言",-1)),j(s("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[4]||(e[4]=a=>t.value.message=a)},"                                ",512),[[q,t.value.message]])]),e[16]||(e[16]=s("div",{class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},[s("button",{type:"submit",class:"btn btn-dark py-3 px-7 rounded-0"},"前往付款")],-1))])]),_:1})])])])])])}}};export{re as default};
