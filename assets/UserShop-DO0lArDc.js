import{J as I,e as _,x as B,_ as E,l as P,g as V,h as j,c as a,a as e,F as g,z as $,d as D,B as m,E as k,D as d,r as U,o as n,A as u,q as z,u as A}from"./index-DxWNoie_.js";import{u as F}from"./cartStore-BrJ7COVD.js";const M=I("productStore",()=>{const y=_([]),c=_(!1);return{products:y,isLoading:c,getProducts:async()=>{try{c.value=!0;const f=await B.get("https://vue3-course-api.hexschool.io/api/cart-yu2513/products/all");y.value=f.data.products,c.value=!1}catch(i){console.error("Error during get products:",i),c.value=!1}}}}),q={class:"d-flex gap-3 justify-content-center my-5",role:"group","aria-label":"Basic radio toggle button group"},J=["id","checked"],O=["for","onClick"],R={class:"container mx-auto"},G={class:"row mt-4"},H={class:"card border-0 mb-4 position-relative"},K=["src","onClick"],Q={class:"card-body p-0"},W=["onClick"],X={key:0,class:"text-muted mt-3"},Y={key:1,class:"text-muted mt-3"},Z={key:2,class:""},tt=["onClick","disabled"],et={key:0,class:"spinner-border text-primary spinner-border-sm text-light",role:"status"},st={key:0,class:"d-flex justify-content-center mt-4"},ot={"aria-label":"Product pagination"},at={class:"pagination"},nt=["disabled"],rt=["onClick"],lt=["disabled"],it={key:1,class:"text-center mt-5"},ct={__name:"UserShop",setup(y){const c=A(),p=M(),i=F(),f=["全部","工具","毛線","課程","組合"],v=_("全部"),T=o=>{v.value=o},S=o=>{c.push(`/user/product/${o}`)},w=async o=>{try{await i.addToCart(o,1)}catch(s){console.error("Error adding to cart:",s)}},h=P(()=>v.value==="全部"?p.products:p.products.filter(o=>o.category.includes(v.value))),r=_(1),C=_(9),L=P(()=>{const o=(r.value-1)*C.value,s=o+C.value;return h.value.slice(o,s)}),b=P(()=>Math.ceil(h.value.length/C.value)),x=o=>{o>=1&&o<=b.value&&(r.value=o,window.scrollTo({top:0,behavior:"smooth"}))};return V(v,()=>{r.value=1}),j(()=>{p.getProducts()}),(o,s)=>{const N=U("Loading");return n(),a(g,null,[e("div",q,[(n(),a(g,null,$(f,(t,l)=>(n(),a(g,{key:l},[e("input",{id:"btnradio"+(l+1),type:"radio",class:"btn-check",name:"btnradio",autocomplete:"off",checked:l===0},null,8,J),e("label",{class:k(["btn btn-outline-primary px-4",{active:v.value===t}]),for:"btnradio"+(l+1),onClick:dt=>T(t)},u(t),11,O)],64))),64))]),D(N,{active:m(p).isLoading||m(i).isLoading},null,8,["active"]),e("div",R,[e("div",G,[(n(!0),a(g,null,$(L.value,t=>(n(),a("div",{class:"col-md-4 col-sm-6",key:t.id},[e("div",H,[e("img",{src:t.imageUrl,alt:"產品圖片",class:"card-img-top rounded-2",style:{width:"100%",height:"300px","object-fit":"cover",cursor:"pointer"},onClick:l=>S(t.id)},null,8,K),e("div",Q,[e("h5",{class:"mb-0 mt-3",style:{cursor:"pointer"},onClick:l=>S(t.id)},u(t.title),9,W),t.price?d("",!0):(n(),a("p",X,"NT$"+u(t.origin_price),1)),t.price?(n(),a("del",Y,"NT$"+u(t.origin_price),1)):d("",!0),t.price?(n(),a("h6",Z,"特價 NT$"+u(t.price),1)):d("",!0),e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:l=>w(t.id),disabled:m(i).status.loadingItem===t.id},[m(i).status.loadingItem===t.id?(n(),a("div",et,s[2]||(s[2]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):d("",!0),s[3]||(s[3]=z(" 加到購物車 "))],8,tt)])])]))),128))])]),h.value.length>0?(n(),a("div",st,[e("nav",ot,[e("ul",at,[e("li",{class:k(["page-item",{disabled:r.value===1}])},[e("button",{class:"btn page-link rounded-0 rounded-start-2",onClick:s[0]||(s[0]=t=>x(r.value-1)),disabled:r.value===1},s[4]||(s[4]=[e("span",{"aria-hidden":"true"},"«",-1)]),8,nt)],2),(n(!0),a(g,null,$(b.value,t=>(n(),a("li",{key:t,class:k(["page-item",{active:t===r.value}])},[e("button",{class:"btn page-link rounded-0",onClick:l=>x(t)},u(t),9,rt)],2))),128)),e("li",{class:k(["page-item",{disabled:r.value===b.value}])},[e("button",{class:"btn page-link rounded-0 rounded-end-2",onClick:s[1]||(s[1]=t=>x(r.value+1)),disabled:r.value===b.value},s[5]||(s[5]=[e("span",{"aria-hidden":"true"},"»",-1)]),8,lt)],2)])])])):d("",!0),h.value.length===0?(n(),a("div",it,s[6]||(s[6]=[e("p",{class:"text-muted"},"該分類下目前沒有產品。",-1)]))):d("",!0)],64)}}},vt=E(ct,[["__scopeId","data-v-5d598146"]]);export{vt as default};
