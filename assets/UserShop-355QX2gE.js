import{r as u,D as h,c as s,a as r,x as c,f as _,F as f,l as N,d as k,e as w,o as n,t as p,q as v,h as I,u as L}from"./index-BkuwJpVc.js";const T={class:"d-flex gap-3 justify-content-center",role:"group","aria-label":"Basic radio toggle button group"},B={class:"container mx-auto"},P={class:"row mt-4"},V={class:"card border-0 mb-4 position-relative"},D=["src","onClick"],E={class:"card-body p-0"},j=["onClick"],q={key:0,class:"text-muted mt-3"},F={key:1,class:"text-muted mt-3"},S={key:2,class:""},U=["onClick","disabled"],z={key:0,class:"spinner-grow text-primary spinner-grow-sm",role:"status"},H={__name:"UserShop",setup(R){const x=L(),l=u([]),d=u({loadingItem:""}),b=u(!1);(async()=>{try{b.value=!0;const t=await k.get("https://vue3-course-api.hexschool.io/api/cart-yu2513/products/all");b.value=!1,l.value=t.data.products}catch(e){console.error("Error during get products:",e)}})();const g=e=>{x.push(`/user/product/${e}`)},$=async e=>{try{d.value.loadingItem=e;const t={product_id:e,qty:1},o=await k.post("https://vue3-course-api.hexschool.io/api/cart-yu2513/cart",{data:t});d.value.loadingItem=""}catch(t){console.error("Error during add to cart:",t)}},a=u("全部"),i=e=>{a.value=e},C=h(()=>a.value==="工具"?l.value.filter(e=>/工具/.test(e.category)):a.value==="毛線"?l.value.filter(e=>/毛線/.test(e.category)):a.value==="課程"?l.value.filter(e=>/課程/.test(e.category)):a.value==="組合"?l.value.filter(e=>/組合/.test(e.category)):l.value.filter(e=>/工具|毛線|課程|組合/.test(e.category)));return(e,t)=>{const m=w("Loading");return n(),s(f,null,[r("div",T,[t[5]||(t[5]=r("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",autocomplete:"off",checked:""},null,-1)),r("label",{class:c(["btn btn-outline-primary px-4",{active:a.value=="全部"}]),for:"btnradio1",onClick:t[0]||(t[0]=o=>i("全部"))},"全部",2),t[6]||(t[6]=r("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",autocomplete:"off"},null,-1)),r("label",{class:c(["btn btn-outline-primary px-4",{active:a.value=="工具"}]),for:"btnradio2",onClick:t[1]||(t[1]=o=>i("工具"))},"工具",2),t[7]||(t[7]=r("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio3",autocomplete:"off"},null,-1)),r("label",{class:c(["btn btn-outline-primary px-4",{active:a.value=="毛線"}]),for:"btnradio3",onClick:t[2]||(t[2]=o=>i("毛線"))},"毛線",2),t[8]||(t[8]=r("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio4",autocomplete:"off"},null,-1)),r("label",{class:c(["btn btn-outline-primary px-4",{active:a.value=="課程"}]),for:"btnradio4",onClick:t[3]||(t[3]=o=>i("課程"))},"課程",2),t[9]||(t[9]=r("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio5",autocomplete:"off"},null,-1)),r("label",{class:c(["btn btn-outline-primary px-4",{active:a.value=="組合"}]),for:"btnradio5",onClick:t[4]||(t[4]=o=>i("組合"))},"組合",2)]),_(m,{active:b.value},null,8,["active"]),r("div",B,[r("div",P,[(n(!0),s(f,null,N(C.value,o=>(n(),s("div",{class:"col-md-3",key:o.id},[r("div",V,[r("img",{src:o.imageUrl,alt:"產品圖片",style:{width:"100%",height:"200px","object-fit":"cover",cursor:"pointer"},class:"card-img-top rounded-2",onClick:y=>g(o.id)},null,8,D),r("div",E,[r("h5",{class:"mb-0 mt-3",style:{cursor:"pointer"},onClick:y=>g(o.id)},p(o.title),9,j),o.price?v("",!0):(n(),s("p",q,"NT$"+p(o.origin_price),1)),o.price?(n(),s("del",F,"NT$"+p(o.origin_price),1)):v("",!0),o.price?(n(),s("h6",S,"特價 NT$"+p(o.price),1)):v("",!0),r("button",{type:"button",class:"btn btn-primary btn-sm",onClick:y=>$(o.id),disabled:d.value.loadingItem===o.id},[d.value.loadingItem===o.id?(n(),s("div",z,t[10]||(t[10]=[r("span",{class:"visually-hidden"},"Loading...",-1)]))):v("",!0),t[11]||(t[11]=I(" 加到購物車 "))],8,U)])])]))),128))])])],64)}}};export{H as default};
